# WordPress投稿前品質チェック・自動修正システムガイド

## システム概要

WordPress投稿前品質チェック・自動修正システムは、記事投稿前に包括的な品質検証を行い、問題を自動修正する高度なシステムです。

## 主要機能

### 🎯 包括的品質チェック

#### 1. 見出し構造検証
- **H5/H6タグ禁止**: 厳格なH2-H4階層の執行
- **見出し階層チェック**: 適切な階層構造の確認
- **テンプレート識別子検出**: H3-1等の残存識別子検出

#### 2. コンテンツ構造検証
- **章構成確認**: 適切な章立ての確認
- **内容完全性チェック**: 必要なセクションの存在確認
- **形式整合性確認**: マークダウン形式の正確性

#### 3. SEO要素検証
- **タイトル最適化**: 適切なタイトル形式の確認
- **メタディスクリプション**: 最適な長さと内容の確認
- **キーワード配置**: 適切なキーワード使用の確認

#### 4. WordPress統合確認
- **Gutenbergブロック対応**: 適切なブロック変換の確認
- **画像統合検証**: 章別画像配置の確認
- **投稿準備状態**: WordPress投稿準備の確認

### 🔧 自動修正機能

#### 1. テンプレート識別子除去
- **H3-1, H3-2等の変換**: 適切な見出しテキストに自動変換
- **テンプレート残存要素除去**: 不要なテンプレート要素の自動削除

#### 2. 見出し階層修正
- **H5/H6ダウングレード**: H4への自動変換
- **階層構造修正**: 適切な見出し階層への自動調整
- **スタイル保持**: 元の強調・装飾の保持

#### 3. コンテンツ修正
- **形式修正**: マークダウン形式の自動修正
- **構造修正**: 章構成の自動調整
- **SEO最適化**: 不足要素の自動補完

### 📊 品質レポート生成

#### 1. 詳細評価
- **品質スコア**: 総合的な品質評価
- **問題別分析**: 項目別の詳細評価
- **修正履歴**: 実行された自動修正の記録

#### 2. 改善提案
- **具体的推奨事項**: 残存問題の解決方法
- **最適化提案**: さらなる品質向上の提案
- **ベストプラクティス**: 推奨される作成方法

## 使用方法

### 1. 単独実行
```bash
# 品質チェックのみ実行
python scripts/pre_wordpress_quality_checker.py outputs/記事名-INT-01/complete_article.md
```

### 2. WordPress投稿統合実行
```bash
# 品質チェック統合版WordPress投稿
python scripts/post_blog_universal_with_quality_check.py
```

### 3. Claude Code合言葉
```bash
# Claude Codeでの実行
品質チェック outputs/記事名-INT-01/complete_article.md
```

## 品質基準

### 🎯 合格基準
- **見出し構造**: H2-H4のみ使用、適切な階層
- **テンプレート要素**: 識別子完全除去
- **コンテンツ完全性**: 全章・必要セクション存在
- **SEO最適化**: タイトル・メタディスクリプション最適化
- **WordPress準備**: Gutenbergブロック対応準備

### ⚠️ 警告基準
- **軽微な形式問題**: 自動修正可能な問題
- **推奨改善事項**: 品質向上の余地あり
- **最適化機会**: さらなる改善の可能性

### ❌ 不合格基準
- **重大な構造問題**: 自動修正不可能な問題
- **必須要素欠如**: 重要なセクション不足
- **形式重大違反**: 修正困難な問題

## トラブルシューティング

### よくある問題と対処法

#### 1. 見出し構造問題
**問題**: H5/H6タグ使用
**対処**: 自動的にH4へダウングレード、手動調整可能

#### 2. テンプレート識別子残存
**問題**: H3-1等の識別子が残存
**対処**: 自動的に適切な見出しテキストに変換

#### 3. WordPress変換エラー
**問題**: Gutenbergブロック変換失敗
**対処**: 形式修正後再実行、手動確認

### エラーメッセージ対応

#### QualityCheckFailed
```
原因: 重大な品質問題が検出された
対処: 生成された品質レポートを確認し、問題を修正
```

#### TemplateIDDetected
```
原因: テンプレート識別子が残存している
対処: 自動修正を実行、またはテンプレート実行を完了
```

#### HeadingStructureViolation
```
原因: 見出し階層が品質基準に違反している
対処: 見出し構造を確認し、H2-H4範囲内に修正
```

## ワークフロー統合

### Boss1指示書での使用
```bash
# Phase3でのWordPress投稿前品質チェック
if [ -f "scripts/pre_wordpress_quality_checker.py" ]; then
    python3 scripts/pre_wordpress_quality_checker.py "$TARGET_ARTICLE"
fi
```

### Worker指示書での使用
```bash
# Phase2での章執筆品質チェック
verify_comprehensive_quality_check "outputs/*/chapter*.md"
```

### President指示書での指示
```bash
# 品質チェック統合版WordPress投稿の指示
./agent-send.sh boss1 "post_blog_universal_with_quality_check.py使用必須"
```

## 今後の拡張予定

### 1. 高度な品質分析
- **AI品質評価**: 内容品質の自動評価
- **読みやすさ分析**: 可読性指標の自動計算
- **SEO詳細分析**: より詳細なSEO評価

### 2. カスタム品質基準
- **プロジェクト別設定**: 記事種別による品質基準調整
- **ユーザー定義ルール**: カスタム品質ルールの設定
- **段階的品質レベル**: 品質レベル別の基準設定

### 3. 統合強化
- **リアルタイム品質チェック**: 執筆中の品質監視
- **品質ダッシュボード**: 品質状況の可視化
- **品質履歴追跡**: 長期的な品質改善追跡

## 関連ドキュメント

- [見出し構造検証システム](validate_article.py) - レガシーシステム
- [WordPress投稿システム](post_blog_universal.py) - 基本投稿機能
- [OutputManager](../utils/output_manager.py) - ファイル管理システム